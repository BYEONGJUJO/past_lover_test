<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”® ì „ìƒ ì—°ì¸ ì°¾ê¸° | AI ì „ìƒ ë¶„ì„ í…ŒìŠ¤íŠ¸</title>
    <meta name="description" content="ì‚¬ì§„ê³¼ ìƒë…„ì›”ì¼ë¡œ AIê°€ ë‹¹ì‹ ì˜ ì „ìƒ ì—°ì¸ì„ ì°¾ì•„ë“œë¦½ë‹ˆë‹¤! ìš´ëª…ì ì¸ ì¸ì—°ì„ ë°œê²¬í•´ë³´ì„¸ìš”">
    <meta name="keywords" content="ì „ìƒì—°ì¸,ìš´ëª…ì˜ì¸ì—°,ì „ìƒí…ŒìŠ¤íŠ¸,AIì ìˆ ,ì˜í˜¼ë©”ì´íŠ¸,ì „ìƒë¶„ì„,ì†Œìš¸ë©”ì´íŠ¸">
    
    <!-- Open Graph -->
    <meta property="og:title" content="ğŸ”® ì „ìƒ ì—°ì¸ ì°¾ê¸° - AIê°€ ì°¾ì•„ì£¼ëŠ” ìš´ëª…ì˜ ì¸ì—°">
    <meta property="og:description" content="ì‚¬ì§„ê³¼ ìƒë…„ì›”ì¼ë¡œ ë‹¹ì‹ ì˜ ì „ìƒ ì—°ì¸ì„ ì°¾ì•„ë“œë¦½ë‹ˆë‹¤!">
    <meta property="og:image" content="https://your-domain.com/pastlife-og.jpg">
    <meta property="og:url" content="https://your-domain.com">
    
    <!-- ì¹´ì¹´ì˜¤ SDK -->
    <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.2/kakao.min.js"></script>
    
    <style>
        * {
            margin: 0; padding: 0; box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            line-height: 1.6;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><radialGradient id="star" cx="50%" cy="50%" r="50%"><stop offset="0%" style="stop-color:white;stop-opacity:0.8"/><stop offset="100%" style="stop-color:white;stop-opacity:0"/></radialGradient></defs><circle cx="20" cy="20" r="1" fill="url(%23star)"/><circle cx="80" cy="40" r="0.5" fill="url(%23star)"/><circle cx="60" cy="80" r="0.8" fill="url(%23star)"/><circle cx="30" cy="70" r="0.6" fill="url(%23star)"/><circle cx="90" cy="20" r="0.4" fill="url(%23star)"/></svg>') repeat;
            animation: twinkle 8s ease-in-out infinite;
            pointer-events: none;
            z-index: 0;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.8; }
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 10px;
            position: relative;
            z-index: 1;
        }
        
        .header {
            text-align: center;
            background: rgba(255,255,255,0.95);
            padding: 2rem 1rem;
            border-radius: 20px;
            margin-bottom: 1rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }
        
        .header h1 {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #FF6B6B, #4ECDC4, #FF69B4, #FFD700);
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            -webkit-text-fill-color: transparent;
            background-size: 300% 300%;
            animation: gradient-shift 3s ease-in-out infinite;
        }

        @keyframes gradient-shift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .stats {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }
        
        .stat-item {
            background: linear-gradient(45deg, #FFE0E6, #E8F5E8);
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-size: 0.9rem;
            color: #666;
            border: 1px solid rgba(255,192,203,0.3);
        }
        
        .upload-section {
            background: rgba(255,255,255,0.95);
            padding: 1.5rem;
            border-radius: 20px;
            margin-bottom: 1rem;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            border: 2px dashed #FFB6C1;
            transition: all 0.3s ease;
            cursor: pointer;
            backdrop-filter: blur(10px);
        }

        .upload-section:hover {
            border-color: #FF69B4;
            background: rgba(255, 105, 180, 0.05);
        }

        .upload-section.dragover {
            border-color: #FF69B4 !important;
            background: rgba(255, 105, 180, 0.1) !important;
            transform: scale(1.02);
        }

        .input-section {
            background: rgba(255,255,255,0.95);
            padding: 1.5rem;
            border-radius: 20px;
            margin-bottom: 1rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        .birthdate-input {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin: 1rem 0;
        }

        .date-select {
            padding: 0.8rem;
            border: 2px solid #FFB6C1;
            border-radius: 10px;
            font-size: 1rem;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s ease;
        }

        .date-select:focus {
            outline: none;
            border-color: #FF69B4;
        }
        
        .file-input-wrapper {
            position: relative;
            display: inline-block;
            margin: 1rem 0;
        }
        
        .file-input {
            display: none;
        }
        
        .file-input-button {
            background: linear-gradient(45deg, #FF69B4, #FFB6C1);
            color: white;
            padding: 1rem 2rem;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            display: inline-block;
            text-decoration: none;
        }
        
        .file-input-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 105, 180, 0.4);
        }
        
        .preview-container {
            margin: 1rem 0;
            max-width: 300px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .preview-image {
            width: 100%;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .analyze-button {
            background: linear-gradient(45deg, #FF69B4, #FFB6C1);
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 50px;
            margin-top: 1rem;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            width: 100%;
            max-width: 300px;
        }
        
        .analyze-button:hover {
            transform: scale(1.05);
        }

        .analyze-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            margin-bottom: 1rem;
            backdrop-filter: blur(10px);
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #FF69B4;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .result-section {
            background: rgba(255,255,255,0.95);
            padding: 2rem 1rem;
            border-radius: 20px;
            margin-bottom: 1rem;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            display: none;
            backdrop-filter: blur(10px);
        }
        
        .lover-result {
            background: linear-gradient(45deg, #FFE0E6, #E8F5E8, #FFF0F5);
            padding: 2rem 1.5rem;
            border-radius: 20px;
            margin: 1rem 0;
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255,182,193,0.3);
        }

        .lover-result::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,192,203,0.3) 0%, transparent 70%);
            animation: shimmer 4s ease-in-out infinite;
        }
        
        @keyframes shimmer {
            0%, 100% { opacity: 0.3; transform: scale(1) rotate(0deg); }
            50% { opacity: 0.8; transform: scale(1.1) rotate(180deg); }
        }
        
        .lover-emoji {
            font-size: 5rem;
            margin: 1rem 0;
            position: relative;
            z-index: 1;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .lover-name {
            font-size: clamp(1.5rem, 5vw, 2.2rem);
            margin: 1rem 0;
            color: #FF1493;
            font-weight: bold;
            position: relative;
            z-index: 1;
        }

        .lover-era {
            font-size: 1.2rem;
            color: #FF69B4;
            margin: 0.5rem 0;
            position: relative;
            z-index: 1;
        }
        
        .love-story {
            background: linear-gradient(45deg, #FFF0F5, #F0F8FF);
            padding: 1.5rem;
            border-radius: 15px;
            margin: 1rem 0;
            text-align: left;
            border: 1px solid rgba(255,182,193,0.3);
        }

        .love-story h3 {
            color: #FF1493;
            text-align: center;
            margin-bottom: 1rem;
        }
        
        .compatibility-section {
            background: linear-gradient(45deg, #E1F5FE, #FCE4EC);
            padding: 1.5rem;
            border-radius: 15px;
            margin: 1rem 0;
        }
        
        .compatibility-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .compatibility-item {
            background: white;
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            border: 1px solid rgba(255,182,193,0.2);
        }

        .compatibility-item:hover {
            transform: translateY(-5px);
        }
        
        .compatibility-emoji {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        .compatibility-title {
            font-weight: bold;
            color: #FF1493;
            margin-bottom: 0.5rem;
        }

        .compatibility-text {
            font-size: 0.9rem;
            color: #666;
        }

        .connection-score {
            background: linear-gradient(45deg, #FF69B4, #FFB6C1);
            color: white;
            padding: 1rem;
            border-radius: 15px;
            margin: 1rem 0;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .share-buttons {
            margin-top: 1.5rem;
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        
        .share-button {
            color: white;
            padding: 0.7rem 1.2rem;
            border-radius: 25px;
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-weight: bold;
        }
        
        .share-button:hover {
            transform: translateY(-2px);
            color: white;
        }

        .share-button.kakao {
            background: linear-gradient(45deg, #FEE500, #FFEB3B);
            color: #3A1D1D;
        }

        .share-button.kakao:hover {
            color: #3A1D1D;
        }

        .share-button.instagram {
            background: linear-gradient(45deg, #E4405F, #9B59B6);
        }

        .share-button.facebook {
            background: linear-gradient(45deg, #1877F2, #42A5F5);
        }

        .share-button.twitter {
            background: linear-gradient(45deg, #1DA1F2, #0D8BD9);
        }

        .share-button.general {
            background: linear-gradient(45deg, #FF69B4, #FFB6C1);
        }

        #shareCanvas {
            display: none;
        }
        
        .related-tests {
            background: rgba(255,255,255,0.95);
            padding: 1.5rem;
            border-radius: 20px;
            margin: 1rem 0;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .test-card {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 1.5rem;
            border-radius: 15px;
            text-decoration: none;
            transition: transform 0.3s ease;
        }
        
        .test-card:hover {
            transform: translateY(-5px);
            color: white;
        }
        
        .floating-cta {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(45deg, #FF69B4, #FFB6C1);
            color: white;
            padding: 1rem;
            border-radius: 50px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            cursor: pointer;
            z-index: 1000;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .footer {
            background: rgba(255,255,255,0.95);
            padding: 2rem 1rem;
            border-radius: 20px;
            margin-top: 2rem;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        .footer a {
            color: #FF69B4;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer a:hover {
            color: #FF1493;
        }
        
        @media (max-width: 768px) {
            .container { padding: 5px; }
            .compatibility-grid { grid-template-columns: repeat(2, 1fr); }
            .birthdate-input { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- í—¤ë” -->
        <div class="header">
            <h1>ğŸ”® ì „ìƒ ì—°ì¸ ì°¾ê¸°</h1>
            <p>ì‚¬ì§„ê³¼ ìƒë…„ì›”ì¼ë¡œ AIê°€ ë‹¹ì‹ ì˜ ì „ìƒ ì—°ì¸ì„ ì°¾ì•„ë“œë¦½ë‹ˆë‹¤!</p>
            <div class="stats">
                <span class="stat-item">ğŸ’• ëˆ„ì  ë¶„ì„ 234,567ëª…</span>
                <span class="stat-item">ğŸ¯ ì •í™•ë„ 94.2%</span>
                <span class="stat-item">â­ ë§Œì¡±ë„ 97.8%</span>
            </div>
        </div>
        
        <!-- ì—…ë¡œë“œ ì„¹ì…˜ -->
        <div class="upload-section" id="uploadSection">
            <h2>ğŸ“¸ ì–¼êµ´ ì‚¬ì§„ì„ ì—…ë¡œë“œí•˜ì„¸ìš”</h2>
            <p>ì •ë©´ì„ ë°”ë¼ë³´ëŠ” ì„ ëª…í•œ ì…€ì¹´ë¡œ ë” ì •í™•í•œ ë¶„ì„ì´ ê°€ëŠ¥í•´ìš”!</p>
            <p style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">
                ğŸ’– í´ë¦­í•˜ê±°ë‚˜ ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸í•´ì„œ ì—…ë¡œë“œí•˜ì„¸ìš”
            </p>
            
            <div class="file-input-wrapper">
                <input type="file" id="imageUpload" class="file-input" accept="image/*,image/jpeg,image/jpg,image/png,image/gif,image/webp">
                <label for="imageUpload" class="file-input-button">
                    ğŸ’• ì‚¬ì§„ ì„ íƒí•˜ê¸°
                </label>
            </div>
            
            <div class="preview-container" id="previewContainer" style="display: none;">
                <img id="previewImage" class="preview-image" alt="ë¯¸ë¦¬ë³´ê¸°">
            </div>
        </div>

        <!-- ìƒë…„ì›”ì¼ ì…ë ¥ ì„¹ì…˜ -->
        <div class="input-section">
            <h2>ğŸ“… ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”</h2>
            <p>íƒœì–´ë‚œ ë‚ ì§œê°€ ì „ìƒì˜ ì¸ì—°ì„ ì°¾ëŠ” ì¤‘ìš”í•œ ë‹¨ì„œê°€ ë©ë‹ˆë‹¤</p>
            
            <div class="birthdate-input">
                <select id="yearSelect" class="date-select">
                    <option value="">ë…„ë„ ì„ íƒ</option>
                </select>
                <select id="monthSelect" class="date-select">
                    <option value="">ì›” ì„ íƒ</option>
                </select>
                <select id="daySelect" class="date-select">
                    <option value="">ì¼ ì„ íƒ</option>
                </select>
            </div>

            <button onclick="analyzeImage()" class="analyze-button" id="analyzeBtn" disabled>
                ğŸ”® ì „ìƒ ì—°ì¸ ì°¾ê¸°
            </button>
        </div>
        
        <!-- ë¡œë”© -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <h3>ğŸ’• AIê°€ ë‹¹ì‹ ì˜ ì „ìƒ ì—°ì¸ì„ ì°¾ëŠ” ì¤‘...</h3>
            <p>ê³¼ê±° ìƒì˜ ê¸°ì–µì„ ì¶”ì í•˜ê³ , ì˜í˜¼ì˜ ì¸ì—°ì„ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤</p>
        </div>
        
        <!-- ê²°ê³¼ ì„¹ì…˜ -->
        <div class="result-section" id="resultSection">
            <h2>âœ¨ ë‹¹ì‹ ì˜ ì „ìƒ ì—°ì¸ ë¶„ì„ ê²°ê³¼</h2>
            
            <div class="lover-result">
                <div class="lover-emoji" id="loverEmoji">ğŸ‘‘</div>
                <div class="lover-name" id="loverName">ë ˆì˜¤ë‚˜ë¥´ë„ ë‹¤ ë¹ˆì¹˜</div>
                <div class="lover-era" id="loverEra">ë¥´ë„¤ìƒìŠ¤ ì‹œëŒ€ (1452-1519)</div>
                <p id="loverDescription">ì²œì¬ ì˜ˆìˆ ê°€ì´ì ë°œëª…ê°€ì˜€ë˜ ë ˆì˜¤ë‚˜ë¥´ë„ì™€ ê¹Šì€ ì˜í˜¼ì˜ ì¸ì—°ì´ ìˆì—ˆìŠµë‹ˆë‹¤.</p>
            </div>

            <div class="connection-score" id="connectionScore">
                ğŸ’• ì˜í˜¼ ì—°ê²°ë„: 97%
            </div>
            
            <div class="love-story">
                <h3>ğŸ’– ë‹¹ì‹ ë“¤ì˜ ì „ìƒ ì‚¬ë‘ ì´ì•¼ê¸°</h3>
                <p id="loveStoryText">15ì„¸ê¸° í”¼ë Œì²´ì—ì„œ ë‹¹ì‹ ì€ ë ˆì˜¤ë‚˜ë¥´ë„ì˜ ë®¤ì¦ˆì˜€ìŠµë‹ˆë‹¤. ê·¸ì˜ ì‘ì—…ì‹¤ì—ì„œ ë§Œë‚œ ì²« ìˆœê°„ë¶€í„° ì„œë¡œì—ê²Œ ìš´ëª…ì ìœ¼ë¡œ ëŒë ¸ê³ , ê·¸ì˜ ë§ì€ ì‘í’ˆì— ë‹¹ì‹ ì˜ ëª¨ìŠµì´ ìˆ¨ê²¨ì ¸ ìˆìŠµë‹ˆë‹¤. ë¹„ë°€ìŠ¤ëŸ½ì§€ë§Œ ìˆœìˆ˜í–ˆë˜ ë‹¹ì‹ ë“¤ì˜ ì‚¬ë‘ì€ ì˜ˆìˆ ì„ í†µí•´ ì˜ì›íˆ ë‚¨ê²¨ì¡ŒìŠµë‹ˆë‹¤.</p>
            </div>
            
            <div class="compatibility-section">
                <h3>ğŸŒŸ ì „ìƒ ì¸ì—° íŠ¹ì§•</h3>
                <div class="compatibility-grid" id="compatibilityGrid">
                    <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                </div>
            </div>
            
            <div class="share-buttons">
                <button class="share-button kakao" onclick="shareToKakao()">ğŸ’› ì¹´ì¹´ì˜¤í†¡</button>
                <button class="share-button instagram" onclick="shareToInstagram()">ğŸ“· ì¸ìŠ¤íƒ€ê·¸ë¨</button>
                <button class="share-button facebook" onclick="shareToFacebook()">ğŸ“˜ í˜ì´ìŠ¤ë¶</button>
                <button class="share-button twitter" onclick="shareToTwitter()">ğŸ¦ íŠ¸ìœ„í„°</button>
                <button class="share-button general" onclick="shareGeneral()">ğŸ”— ë§í¬ë³µì‚¬</button>
            </div>

            <div style="margin-top: 1rem;">
                <button class="share-button general" onclick="retakeTest()">ğŸ”„ ë‹¤ì‹œ ë¶„ì„</button>
                <button class="share-button general" onclick="saveResult()">ğŸ’¾ ê²°ê³¼ ì €ì¥</button>
            </div>
        </div>
        
        <!-- ì—°ê´€ í…ŒìŠ¤íŠ¸ -->
        <div class="related-tests">
            <h2>ğŸŒŸ ë‹¤ë¥¸ ì‹ ë¹„í•œ AI í…ŒìŠ¤íŠ¸</h2>
            <div class="test-grid">
                <a href="#" class="test-card" target="_blank">
                    <h3>ğŸ’’ ë¯¸ë˜ ê²°í˜¼ìƒëŒ€ ì˜ˆì¸¡</h3>
                    <p>ë‹¹ì‹ ì˜ ë¯¸ë˜ ë°°ìš°ìëŠ” ì–´ë–¤ ëª¨ìŠµì¼ê¹Œìš”?</p>
                </a>
                <a href="#" class="test-card" target="_blank">
                    <h3>ğŸ’• ì—°ì•  ìš´ì„¸ ë¶„ì„</h3>
                    <p>ì˜¬í•´ ë‹¹ì‹ ì˜ ì—°ì• ìš´ì„ í™•ì¸í•´ë³´ì„¸ìš”</p>
                </a>
                <a href="https://www.mymoviecharacter.site" class="test-card" target="_blank">
                    <h3>ğŸ¬ ë‹®ì€ ì˜í™” ìºë¦­í„°</h3>
                    <p>ì–´ë–¤ ì˜í™” ì£¼ì¸ê³µê³¼ ë‹®ì•˜ì„ê¹Œìš”?</p>
                </a>
            </div>
        </div>

        <!-- í‘¸í„° -->
        <div class="footer">
            <h3>ğŸ”® ì „ìƒ ì—°ì¸ ì°¾ê¸° í…ŒìŠ¤íŠ¸</h3>
            <p>ëª¨ë“  ì¸ì—°ì€ ì†Œì¤‘í•´ìš”! ğŸ’•</p>
            <div style="margin-top: 1rem; color: #666; font-size: 0.9rem;">
                <a href="contact.html">ë¬¸ì˜í•˜ê¸°</a> | 
                <a href="privacy.html">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> | 
                <a href="terms.html">ì´ìš©ì•½ê´€</a>
            </div>
            <p style="margin-top: 1rem; color: #999; font-size: 0.8rem;">
                Â© 2025 ì „ìƒ ì—°ì¸ ì°¾ê¸° í…ŒìŠ¤íŠ¸. All rights reserved.
            </p>
        </div>
    </div>
    
    <!-- í”Œë¡œíŒ… CTA -->
    <div class="floating-cta" onclick="scrollToUpload()">
        ğŸ’• ë¶„ì„í•˜ê¸°
    </div>

    <!-- ìˆ¨ê²¨ì§„ ìº”ë²„ìŠ¤ (ê³µìœ  ì´ë¯¸ì§€ ìƒì„±ìš©) -->
    <canvas id="shareCanvas" width="600" height="800"></canvas>

    <script>
        // ì¹´ì¹´ì˜¤ SDK ì´ˆê¸°í™” (ì‹¤ì œ ì•± í‚¤ë¡œ êµì²´ í•„ìš”)
        if (typeof Kakao !== 'undefined') {
            Kakao.init('YOUR_KAKAO_APP_KEY'); // ì‹¤ì œ ì¹´ì¹´ì˜¤ ì•± í‚¤ë¡œ êµì²´í•´ì•¼ í•©ë‹ˆë‹¤
        }

        // ì „ìƒ ì—°ì¸ ë°ì´í„°
        const pastLifeLoverData = [
            {
                emoji: "ğŸ‘‘",
                name: "ë ˆì˜¤ë‚˜ë¥´ë„ ë‹¤ ë¹ˆì¹˜",
                era: "ë¥´ë„¤ìƒìŠ¤ ì‹œëŒ€ (1452-1519)",
                desc: "ì²œì¬ ì˜ˆìˆ ê°€ì´ì ë°œëª…ê°€ì˜€ë˜ ë ˆì˜¤ë‚˜ë¥´ë„ì™€ ê¹Šì€ ì˜í˜¼ì˜ ì¸ì—°ì´ ìˆì—ˆìŠµë‹ˆë‹¤.",
                story: "15ì„¸ê¸° í”¼ë Œì²´ì—ì„œ ë‹¹ì‹ ì€ ë ˆì˜¤ë‚˜ë¥´ë„ì˜ ë®¤ì¦ˆì˜€ìŠµë‹ˆë‹¤. ê·¸ì˜ ì‘ì—…ì‹¤ì—ì„œ ë§Œë‚œ ì²« ìˆœê°„ë¶€í„° ì„œë¡œì—ê²Œ ìš´ëª…ì ìœ¼ë¡œ ëŒë ¸ê³ , ê·¸ì˜ ë§ì€ ì‘í’ˆì— ë‹¹ì‹ ì˜ ëª¨ìŠµì´ ìˆ¨ê²¨ì ¸ ìˆìŠµë‹ˆë‹¤. ë¹„ë°€ìŠ¤ëŸ½ì§€ë§Œ ìˆœìˆ˜í–ˆë˜ ë‹¹ì‹ ë“¤ì˜ ì‚¬ë‘ì€ ì˜ˆìˆ ì„ í†µí•´ ì˜ì›íˆ ë‚¨ê²¨ì¡ŒìŠµë‹ˆë‹¤.",
                compatibility: [
                    {emoji: "ğŸ¨", title: "ì˜ˆìˆ ì  ì˜ê°", text: "ì°½ì¡°ì  ì—ë„ˆì§€ ê³µìœ "},
                    {emoji: "ğŸ§ ", title: "ì§€ì  êµê°", text: "ê¹Šì€ ì² í•™ì  ëŒ€í™”"},
                    {emoji: "ğŸŒŸ", title: "ì˜í˜¼ì˜ ê³µëª…", text: "ì™„ë²½í•œ ì •ì‹ ì  ì¼ì¹˜"},
                    {emoji: "ğŸ’", title: "ì˜ì›í•œ ì‚¬ë‘", text: "ì‹œëŒ€ë¥¼ ì´ˆì›”í•œ ì¸ì—°"}
                ],
                connection: 97
            },
            {
                emoji: "âš”ï¸",
                name: "ì•„ì„œ ì™•",
                era: "ì¤‘ì„¸ ì•„ì„œì™• ì „ì„¤ (5-6ì„¸ê¸°)",
                desc: "ì „ì„¤ì˜ ì›íƒ ê¸°ì‚¬ë‹¨ì„ ì´ëˆ ì•„ì„œ ì™•ê³¼ ìˆ­ê³ í•œ ì‚¬ë‘ì„ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤.",
                story: "ìºë©€ë¡¯ ì„±ì—ì„œ ë‹¹ì‹ ì€ ì•„ì„œ ì™•ì˜ ê°€ì¥ ì‹ ë¢°ë°›ëŠ” ì¡°ì–¸ìì´ì ë¹„ë°€ìŠ¤ëŸ¬ìš´ ì—°ì¸ì´ì—ˆìŠµë‹ˆë‹¤. ì™•êµ­ì˜ í‰í™”ë¥¼ ìœ„í•´ ìˆ¨ê²¨ì•¼ í–ˆë˜ ì‚¬ë‘ì´ì§€ë§Œ, ì„œë¡œë¥¼ í–¥í•œ ë§ˆìŒì€ ê·¸ ì–´ë–¤ ì‹œë ¨ë³´ë‹¤ ê°•í–ˆìŠµë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì§€í˜œëŠ” ì™•êµ­ì„ ë²ˆì˜ìœ¼ë¡œ ì´ëŒì—ˆê³ , ë‘ ì‚¬ëŒì˜ ì‚¬ë‘ì€ ì „ì„¤ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.",
                compatibility: [
                    {emoji: "ğŸ‘‘", title: "ê³ ê·€í•œ í’ˆê²©", text: "ì™•ì¡±ë‹¤ìš´ ê¸°í’ˆê³¼ ìœ„ì—„"},
                    {emoji: "âš”ï¸", title: "ìš©ê¸°ì™€ ì˜ë¦¬", text: "ì •ì˜ë¥¼ ìœ„í•œ ê°•ì¸í•¨"},
                    {emoji: "ğŸ›¡ï¸", title: "ë³´í˜¸ë³¸ëŠ¥", text: "ì‚¬ë‘í•˜ëŠ” ì´ë¥¼ ì§€í‚¤ëŠ” ë§ˆìŒ"},
                    {emoji: "ğŸŒŸ", title: "ìˆ­ê³ í•œ ì‚¬ë‘", text: "ì´ìƒì ì´ê³  ìˆœìˆ˜í•œ ì—°ì• "}
                ],
                connection: 95
            },
            {
                emoji: "ğŸŒ¸",
                name: "ë¬´ë¼ì‚¬í‚¤ ì‹œí‚¤ë¶€",
                era: "í—¤ì´ì•ˆ ì‹œëŒ€ ì¼ë³¸ (973-1014)",
                desc: "ì¼ë³¸ ìµœê³ ì˜ ì—¬ë¥˜ ì‘ê°€ ë¬´ë¼ì‚¬í‚¤ ì‹œí‚¤ë¶€ì™€ ë¬¸í•™ì  ì˜í˜¼ì„ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤.",
                story: "í—¤ì´ì•ˆ ì‹œëŒ€ êµí† ì—ì„œ ë‹¹ì‹ ì€ ë¬´ë¼ì‚¬í‚¤ ì‹œí‚¤ë¶€ì˜ ë¬¸í•™ì  ë™ë°˜ìì˜€ìŠµë‹ˆë‹¤. ë‹¬ë¹› ì•„ë˜ ì •ì›ì—ì„œ ì‹œë¥¼ ì½ìœ¼ë©° ë§ˆìŒì„ ë‚˜ëˆ„ì—ˆê³ , ê·¸ë…€ì˜ ëŒ€ì‘ 'ê²ì§€ ì´ì•¼ê¸°'ì—ëŠ” ë‹¹ì‹ ê³¼ì˜ ì¶”ì–µì´ ë§ì´ ë‹´ê²¨ìˆìŠµë‹ˆë‹¤. ìš°ì•„í•˜ê³  ì„¬ì„¸í•œ ì‚¬ë‘ì´ì—ˆì§€ë§Œ, ë‹¹ì‹œ ì‚¬íšŒì˜ ì œì•½ìœ¼ë¡œ ì¸í•´ ì€ë°€í•  ìˆ˜ë°–ì— ì—†ì—ˆë˜ ì•„ë¦„ë‹¤ìš´ ì¸ì—°ì´ì—ˆìŠµë‹ˆë‹¤.",
                compatibility: [
                    {emoji: "ğŸ“š", title: "ë¬¸í•™ì  êµê°", text: "ì‹œì™€ ì†Œì„¤ì„ í†µí•œ ì†Œí†µ"},
                    {emoji: "ğŸŒ™", title: "ì„¬ì„¸í•œ ê°ì„±", text: "ë‹¬ë¹› ê°™ì€ ìš°ì•„í•œ ì •ì„œ"},
                    {emoji: "ğŸŒ¸", title: "ì¼ë³¸ì  ë¯¸í•™", text: "ì™€ë¹„ì‚¬ë¹„ì˜ ì•„ë¦„ë‹¤ì›€"},
                    {emoji: "ğŸ’Œ", title: "í¸ì§€ ì‚¬ë‘", text: "ê¸€ë¡œ ì „í•˜ëŠ” ê¹Šì€ ë§ˆìŒ"}
                ],
                connection: 94
            },
            {
                emoji: "ğŸº",
                name: "í´ë ˆì˜¤íŒŒíŠ¸ë¼ 7ì„¸",
                era: "ê³ ëŒ€ ì´ì§‘íŠ¸ (69-30 BC)",
                desc: "ì´ì§‘íŠ¸ ìµœí›„ì˜ ì—¬ì™• í´ë ˆì˜¤íŒŒíŠ¸ë¼ì™€ ì—´ì •ì ì¸ ì‚¬ë‘ì„ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤.",
                story: "ë‚˜ì¼ê°•ì´ íë¥´ëŠ” ì•Œë ‰ì‚°ë“œë¦¬ì•„ì—ì„œ ë‹¹ì‹ ì€ í´ë ˆì˜¤íŒŒíŠ¸ë¼ì˜ ê°€ì¥ ê°€ê¹Œìš´ ì‹¬ë³µì´ì ì—°ì¸ì´ì—ˆìŠµë‹ˆë‹¤. ê·¸ë…€ì˜ ì§€í˜œì™€ ì•„ë¦„ë‹¤ì›€ì— ë§¤ë£Œë˜ì—ˆê³ , í•¨ê»˜ ì´ì§‘íŠ¸ì˜ í™©ê¸ˆê¸°ë¥¼ ë§Œë“¤ì–´ê°”ìŠµë‹ˆë‹¤. ë¡œë§ˆì˜ ì¹¨ì…ì— ë§ì„œ ì‹¸ìš°ë©° ì„œë¡œë¥¼ ì˜ì§€í–ˆë˜ ê·¸ ì‹œì ˆ, ë‘ ì‚¬ëŒì˜ ì‚¬ë‘ì€ ì—­ì‚¬ë¥¼ ì›€ì§ì¼ ë§Œí¼ ê°•ë ¬í–ˆìŠµë‹ˆë‹¤.",
                compatibility: [
                    {emoji: "ğŸ‘‘", title: "ê¶Œë ¥ê³¼ ì¹´ë¦¬ìŠ¤ë§ˆ", text: "ê°•ì¸í•œ ë¦¬ë”ì‹­ê³¼ ë§¤ë ¥"},
                    {emoji: "ğŸŒŸ", title: "ì§€ì  ë§¤ë ¥", text: "7ê°œ ì–¸ì–´ë¥¼ êµ¬ì‚¬í•˜ëŠ” ì§€ì„±"},
                    {emoji: "ğŸ’", title: "ëŸ­ì…”ë¦¬ ì·¨í–¥", text: "í™”ë ¤í•˜ê³  ì„¸ë ¨ëœ ë¯¸í•™"},
                    {emoji: "ğŸ”¥", title: "ì—´ì •ì  ì‚¬ë‘", text: "ë¶ˆíƒ€ëŠ” ë“¯í•œ ë¡œë§¨ìŠ¤"}
                ],
                connection: 96
            },
            {
                emoji: "ğŸ­",
                name: "ìœŒë¦¬ì—„ ì…°ìµìŠ¤í”¼ì–´",
                era: "ì—˜ë¦¬ìë² ìŠ¤ ì‹œëŒ€ (1564-1616)",
                desc: "ì˜êµ­ ìµœê³ ì˜ ê·¹ì‘ê°€ ì…°ìµìŠ¤í”¼ì–´ì™€ ì°½ì‘ì˜ ì˜ê°ì„ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤.",
                story: "16ì„¸ê¸° ëŸ°ë˜ì˜ ê¸€ë¡œë¸Œ ê·¹ì¥ì—ì„œ ë‹¹ì‹ ì€ ì…°ìµìŠ¤í”¼ì–´ì˜ ë®¤ì¦ˆì´ì ë¹„ë°€ìŠ¤ëŸ¬ìš´ ì—°ì¸ì´ì—ˆìŠµë‹ˆë‹¤. ê·¸ì˜ ì†Œë„¤íŠ¸ë“¤ì€ ëŒ€ë¶€ë¶„ ë‹¹ì‹ ì—ê²Œ ë°”ì¹œ ì‚¬ë‘ì˜ ê³ ë°±ì´ì—ˆê³ , 'ë¡œë¯¸ì˜¤ì™€ ì¤„ë¦¬ì—£'ì˜ ì˜ê°ë„ ë‹¹ì‹ ë“¤ì˜ ì‚¬ë‘ì—ì„œ ë‚˜ì™”ìŠµë‹ˆë‹¤. ì‚¬íšŒì  ì‹ ë¶„ ì°¨ì´ë¡œ ê³µê°œí•  ìˆ˜ ì—†ì—ˆë˜ ì‚¬ë‘ì´ì§€ë§Œ, ê·¸ ìˆœìˆ˜í•¨ì€ ì˜ì›í•œ ë¬¸í•™ìœ¼ë¡œ ë‚¨ì•˜ìŠµë‹ˆë‹¤.",
                compatibility: [
                    {emoji: "ğŸ­", title: "ì—°ê·¹ì  ë¡œë§¨ìŠ¤", text: "ë“œë¼ë§ˆí‹±í•œ ì‚¬ë‘ í‘œí˜„"},
                    {emoji: "ğŸ“", title: "ë¬¸í•™ì  ì†Œí†µ", text: "ì•„ë¦„ë‹¤ìš´ ì–¸ì–´ë¡œ ë§ˆìŒ ì „ë‹¬"},
                    {emoji: "ğŸŒ¹", title: "ë‚­ë§Œì  ì •ì„œ", text: "ì¥ë¯¸ì²˜ëŸ¼ ì•„ë¦„ë‹¤ìš´ ì‚¬ë‘"},
                    {emoji: "â­", title: "ì˜ˆìˆ í˜¼", text: "ì°½ì‘ì„ í†µí•œ ì˜í˜¼ì˜ ë§Œë‚¨"}
                ],
                connection: 93
            },
            {
                emoji: "ğŸ¼",
                name: "ë³¼í”„ê°• ì•„ë§ˆë°ìš°ìŠ¤ ëª¨ì°¨ë¥´íŠ¸",
                era: "ê³ ì „ì£¼ì˜ ì‹œëŒ€ (1756-1791)",
                desc: "ì²œì¬ ìŒì•…ê°€ ëª¨ì°¨ë¥´íŠ¸ì™€ ìŒì•…ìœ¼ë¡œ ì—°ê²°ëœ ì•„ë¦„ë‹¤ìš´ ì¸ì—°ì´ ìˆì—ˆìŠµë‹ˆë‹¤.",
                story: "18ì„¸ê¸° ë¹ˆì˜ ìŒì•… ì‚´ë¡±ì—ì„œ ë‹¹ì‹ ì€ ëª¨ì°¨ë¥´íŠ¸ì˜ ì˜ê°ì˜ ì›ì²œì´ì—ˆìŠµë‹ˆë‹¤. ê·¸ê°€ ì—°ì£¼í•˜ëŠ” í”¼ì•„ë…¸ ì„ ìœ¨ì— ë§ì¶° ë‹¹ì‹ ì´ ë…¸ë˜í•˜ë˜ ìˆœê°„ë“¤ì€ ì²œìƒì˜ í™”ìŒ ê°™ì•˜ìŠµë‹ˆë‹¤. ê·¸ì˜ ë§ì€ ê³¡ë“¤, íŠ¹íˆ ì‚¬ë‘ ë…¸ë˜ë“¤ì€ ë‹¹ì‹ ì„ ìƒê°í•˜ë©° ì‘ê³¡í•œ ê²ƒë“¤ì´ì—ˆìŠµë‹ˆë‹¤. ì§§ì•˜ì§€ë§Œ ì°¬ë€í–ˆë˜ ì‚¬ë‘ì€ ë¶ˆë©¸ì˜ ìŒì•…ìœ¼ë¡œ ë‚¨ì•˜ìŠµë‹ˆë‹¤.",
                compatibility: [
                    {emoji: "ğŸµ", title: "ìŒì•…ì  ì¡°í™”", text: "ì™„ë²½í•œ í•˜ëª¨ë‹ˆì™€ ë¦¬ë“¬"},
                    {emoji: "âœ¨", title: "ì²œì¬ì  êµê°", text: "ë¹„ë²”í•œ ì¬ëŠ¥ì˜ ê³µëª…"},
                    {emoji: "ğŸ­", title: "ì˜¤í˜ë¼í‹± ë¡œë§¨ìŠ¤", text: "ê·¹ì ì´ê³  ì•„ë¦„ë‹¤ìš´ ì‚¬ë‘"},
                    {emoji: "ğŸ’«", title: "ì§§ê³  ê°•ë ¬í•¨", text: "ë³„ë˜¥ë³„ ê°™ì€ ìš´ëª…ì  ë§Œë‚¨"}
                ],
                connection: 92
            },
            {
                emoji: "ğŸŒŠ",
                name: "ë§ˆë¥´ì½” í´ë¡œ",
                era: "ì¤‘ì„¸ ë§ê¸° (1254-1324)",
                desc: "ìœ„ëŒ€í•œ íƒí—˜ê°€ ë§ˆë¥´ì½” í´ë¡œì™€ ëª¨í—˜ìœ¼ë¡œ ê°€ë“í•œ ë¡œë§¨ìŠ¤ë¥¼ ê²½í—˜í–ˆìŠµë‹ˆë‹¤.",
                story: "ì‹¤í¬ë¡œë“œë¥¼ ë”°ë¼ ì—¬í–‰í•˜ë˜ ì¤‘ ë‹¹ì‹ ì€ ë§ˆë¥´ì½” í´ë¡œì˜ ë™ë°˜ìê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. ë² ë‹ˆìŠ¤ì—ì„œ ì¤‘êµ­ê¹Œì§€, ìˆ˜ë§ì€ ìœ„í—˜ê³¼ ì‹ ë¹„ë¡œìš´ ê²½í—˜ì„ í•¨ê»˜í•˜ë©° ê¹Šì€ ì‚¬ë‘ì— ë¹ ì¡ŒìŠµë‹ˆë‹¤. ì¿ ë¹Œë¼ì´ ì¹¸ì˜ ê¶ì •ì—ì„œ ë³´ë‚¸ ì‹œê°„ë“¤ê³¼ ëŒì•„ì˜¤ëŠ” ë°”ë‹·ê¸¸ì—ì„œì˜ ì¶”ì–µë“¤ì€ ë‘ ì‚¬ëŒë§Œì˜ íŠ¹ë³„í•œ ë³´ë¬¼ì´ì—ˆìŠµë‹ˆë‹¤.",
                compatibility: [
                    {emoji: "ğŸ—ºï¸", title: "ëª¨í—˜ì •ì‹ ", text: "ìƒˆë¡œìš´ ì„¸ê³„ë¥¼ í–¥í•œ í˜¸ê¸°ì‹¬"},
                    {emoji: "ğŸš¢", title: "ì—¬í–‰ì ê¸°ì§ˆ", text: "ììœ ë¡­ê³  ì—­ë™ì ì¸ ì‚¶"},
                    {emoji: "ğŸ’", title: "ì´êµ­ì  ë§¤ë ¥", text: "ë‹¤ì–‘í•œ ë¬¸í™”ì— ëŒ€í•œ ì´í•´"},
                    {emoji: "ğŸŒŸ", title: "ìš´ëª…ì  ë§Œë‚¨", text: "ìš°ì—° ê°™ì€ í•„ì—°ì˜ ì¸ì—°"}
                ],
                connection: 90
            },
            {
                emoji: "ğŸŒ¹",
                name: "ë‚˜í´ë ˆì˜¹ ë³´ë‚˜íŒŒë¥´íŠ¸",
                era: "ë‚˜í´ë ˆì˜¹ ì‹œëŒ€ (1769-1821)",
                desc: "í”„ë‘ìŠ¤ í™©ì œ ë‚˜í´ë ˆì˜¹ê³¼ ê²©ì •ì ì´ê³  íŒŒë€ë§Œì¥í•œ ì‚¬ë‘ì„ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤.",
                story: "í˜ëª…ì˜ ì‹œëŒ€ íŒŒë¦¬ì—ì„œ ë‹¹ì‹ ì€ ë‚˜í´ë ˆì˜¹ì˜ ë§ˆìŒì„ ì‚¬ë¡œì¡ì€ ìœ ì¼í•œ ì—¬ì¸ì´ì—ˆìŠµë‹ˆë‹¤. ì „ìŸí„°ì—ì„œë„ ë‹¹ì‹ ì—ê²Œ ë³´ë‚´ëŠ” ì—´ì •ì ì¸ í¸ì§€ë¥¼ ì¼ê³ , ìŠ¹ë¦¬ í›„ì—ëŠ” í•­ìƒ ë‹¹ì‹  ê³ìœ¼ë¡œ ëŒì•„ì™”ìŠµë‹ˆë‹¤. ê¶Œë ¥ì˜ ì •ì ì—ì„œë„ ë³€ì¹˜ ì•ŠëŠ” ì‚¬ë‘ì„ ë³´ì—¬ì¤€ ë‹¹ì‹ ë“¤ì˜ ê´€ê³„ëŠ” ì—­ì‚¬ìƒ ê°€ì¥ ë¡œë§¨í‹±í•œ ì‚¬ë‘ ì¤‘ í•˜ë‚˜ì˜€ìŠµë‹ˆë‹¤.",
                compatibility: [
                    {emoji: "ğŸ‘‘", title: "ì œêµ­ì˜ ë¡œë§¨ìŠ¤", text: "ì›…ëŒ€í•œ ìŠ¤ì¼€ì¼ì˜ ì‚¬ë‘"},
                    {emoji: "âš”ï¸", title: "ì˜ì›…ì  ê¸°ì§ˆ", text: "ê°•ì¸í•˜ê³  ì¹´ë¦¬ìŠ¤ë§ˆí‹±í•¨"},
                    {emoji: "ğŸ’Œ", title: "ì—´ì •ì  í‘œí˜„", text: "ë¶ˆíƒ€ëŠ” ë“¯í•œ ì‚¬ë‘ ê³ ë°±"},
                    {emoji: "ğŸŒŸ", title: "ì—­ì‚¬ì  ì¸ì—°", text: "ì‹œëŒ€ë¥¼ ì´ˆì›”í•œ ì „ì„¤ì  ì‚¬ë‘"}
                ],
                connection: 89
            },
            {
                emoji: "ğŸ¨",
                name: "ë¹ˆì„¼íŠ¸ ë°˜ ê³ í",
                era: "í›„ê¸° ì¸ìƒì£¼ì˜ (1853-1890)",
                desc: "ì—´ì •ì ì¸ í™”ê°€ ë°˜ ê³ íì™€ ì˜ˆìˆ í˜¼ìœ¼ë¡œ ì—°ê²°ëœ ê¹Šì€ ì‚¬ë‘ì´ ìˆì—ˆìŠµë‹ˆë‹¤.",
                story: "í”„ë‘ìŠ¤ ë‚¨ë¶€ ì•„ë¥¼ì—ì„œ ë‹¹ì‹ ì€ ê³ íì˜ ìœ ì¼í•œ ìœ„ë¡œì´ì ì˜ê°ì´ì—ˆìŠµë‹ˆë‹¤. ê·¸ì˜ ê·¸ë¦¼ 'ë³„ì´ ë¹›ë‚˜ëŠ” ë°¤'ì„ í•¨ê»˜ ë°”ë¼ë³´ë©° ê¿ˆì„ ë‚˜ëˆ„ì—ˆê³ , í•´ë°”ë¼ê¸° ë°­ì—ì„œ í•¨ê»˜ ì›ƒë˜ ê·¸ ì‹œê°„ë“¤ì´ ê·¸ì˜ ì‘í’ˆì— ê³ ìŠ¤ë€íˆ ë‹´ê²¨ìˆìŠµë‹ˆë‹¤. ì„¸ìƒì´ ì´í•´í•˜ì§€ ëª»í•œ ê·¸ì˜ ì˜ˆìˆ ì„ ë‹¹ì‹ ë§Œì€ ì•Œì•„ì£¼ì—ˆê³ , ê·¸ ì‚¬ë‘ì´ ê·¸ë¥¼ ê³„ì† ê·¸ë¦¬ê²Œ í–ˆìŠµë‹ˆë‹¤.",
                compatibility: [
                    {emoji: "ğŸ¨", title: "ì˜ˆìˆ ì  ê°ì„±", text: "ê¹Šì€ ë¯¸ì  ê³µê°ëŒ€"},
                    {emoji: "ğŸŒ»", title: "ìˆœìˆ˜í•œ ë§ˆìŒ", text: "í•´ë°”ë¼ê¸° ê°™ì€ ë§‘ì€ ì‚¬ë‘"},
                    {emoji: "â­", title: "ê¿ˆê³¼ ì´ìƒ", text: "ë³„ì„ ë°”ë¼ë³´ëŠ” ë¡œë§¨í‹±í•¨"},
                    {emoji: "ğŸ’›", title: "ë¬´ì¡°ê±´ì  ì‚¬ë‘", text: "ëª¨ë“  ê²ƒì„ ì´í•´í•˜ê³  ë°›ì•„ì£¼ëŠ” ë§ˆìŒ"}
                ],
                connection: 94
            },
            {
                emoji: "ğŸŒ™",
                name: "ì´ë°± (æç™½)",
                era: "ë‹¹ë‚˜ë¼ ì„±ë‹¹ì‹œëŒ€ (701-762)",
                desc: "ì¤‘êµ­ ìµœê³ ì˜ ì‹œì¸ ì´ë°±ê³¼ ë‹¬ë¹› ì•„ë˜ ì‹œë¡œ ì‚¬ë‘ì„ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤.",
                story: "ë‹¹ë‚˜ë¼ ì¥ì•ˆì—ì„œ ë‹¹ì‹ ì€ ì´ë°±ì˜ ì‹œì  ì˜ê°ì´ì ë§ˆìŒì˜ ë²—ì´ì—ˆìŠµë‹ˆë‹¤. ë‹¬ë°¤ì— ë°°ë¥¼ íƒ€ê³  ê°•ì„ ê±´ë„ˆë©° ì¦‰ì„ì—ì„œ ì‹œë¥¼ ì£¼ê³ ë°›ì•˜ê³ , ìˆ ì”ì„ ê¸°ìš¸ì´ë©° ì² í•™ê³¼ ì‚¬ë‘ì„ ë…¼í–ˆìŠµë‹ˆë‹¤. 'ì •ì•¼ì‚¬(éœå¤œæ€)'ë¥¼ ë¹„ë¡¯í•œ ê·¸ì˜ ë§ì€ ëª…ì‘ë“¤ì—ëŠ” ë‹¹ì‹ ê³¼ì˜ ì¶”ì–µì´ ìŠ¤ë©°ìˆìŠµë‹ˆë‹¤. ììœ ë¡­ê³  ì´ˆì›”ì ì¸ ì‚¬ë‘ì´ì—ˆìŠµë‹ˆë‹¤.",
                compatibility: [
                    {emoji: "ğŸŒ™", title: "ë‹¬ë¹› ë¡œë§¨ìŠ¤", text: "ì‹œì ì´ê³  ëª½í™˜ì ì¸ ì‚¬ë‘"},
                    {emoji: "ğŸ“œ", title: "ë¬¸í•™ì  êµê°", text: "ì‹œë¡œ ë‚˜ëˆ„ëŠ” ê¹Šì€ ëŒ€í™”"},
                    {emoji: "ğŸ·", title: "í’ë¥˜ì™€ ì—¬ìœ ", text: "ìˆ ê³¼ ì‹œê°€ ìˆëŠ” ì‚¶"},
                    {emoji: "ğŸŒŸ", title: "ììœ ë¡œìš´ ì˜í˜¼", text: "ì„¸ì†ì„ ì´ˆì›”í•œ ë§Œë‚¨"}
                ],
                connection: 91
            },
            {
                emoji: "ğŸ¦…",
                name: "ì¹­ê¸°ì¦ˆ ì¹¸",
                era: "ëª½ê³¨ ì œêµ­ (1162-1227)",
                desc: "ëª½ê³¨ ëŒ€ì œêµ­ì„ ê±´ì„¤í•œ ì¹­ê¸°ì¦ˆ ì¹¸ê³¼ ì´ˆì›ì—ì„œì˜ ìš´ëª…ì  ë§Œë‚¨ì´ ìˆì—ˆìŠµë‹ˆë‹¤.",
                story: "ëì—†ëŠ” ëª½ê³¨ ëŒ€ì´ˆì›ì—ì„œ ë‹¹ì‹ ì€ ì¹­ê¸°ì¦ˆ ì¹¸ì˜ ë§ˆìŒì„ ì›€ì§ì¸ ìœ ì¼í•œ ì—¬ì¸ì´ì—ˆìŠµë‹ˆë‹¤. ë§ì„ íƒ€ê³  ì´ˆì›ì„ ë‹¬ë¦¬ë©° ììœ ë¡œì›€ì„ ë§Œë½í–ˆê³ , ë°¤í•˜ëŠ˜ì˜ ë³„ë“¤ ì•„ë˜ì„œ ì œêµ­ì˜ ê¿ˆì„ í•¨ê»˜ í‚¤ì› ìŠµë‹ˆë‹¤. ê±°ì¹œ ì „ì‚¬ì˜€ë˜ ê·¸ê°€ ë‹¹ì‹  ì•ì—ì„œë§Œì€ ë¶€ë“œëŸ¬ìš´ ë‚¨ìê°€ ë˜ì—ˆë˜ ê·¸ ì‹œì ˆì˜ ì‚¬ë‘ì€ ì „ì„¤ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.",
                compatibility: [
                    {emoji: "ğŸ", title: "ììœ ë¡œìš´ ê¸°ìƒ", text: "ì´ˆì›ì„ ë‹¬ë¦¬ëŠ” ì•¼ìƒì˜ í˜¼"},
                    {emoji: "â­", title: "ì›…ëŒ€í•œ ê¿ˆ", text: "ì„¸ê³„ë¥¼ í’ˆëŠ” í° ë¹„ì „"},
                    {emoji: "ğŸ¹", title: "ê°•ì¸í•œ ì˜ì§€", text: "ëª©í‘œë¥¼ í–¥í•œ ë¶ˆêµ´ì˜ ì •ì‹ "},
                    {emoji: "ğŸŒŸ", title: "ì œêµ­ì˜ ì‚¬ë‘", text: "ì—­ì‚¬ë¥¼ ì›€ì§ì¸ ê±°ëŒ€í•œ ì¸ì—°"}
                ],
                connection: 88
            },
            {
                emoji: "ğŸ“š",
                name: "ê³µì (å­”å­)",
                era: "ì¶˜ì¶”ì‹œëŒ€ (551-479 BC)",
                desc: "ìœ„ëŒ€í•œ ì‚¬ìƒê°€ ê³µìì™€ ì§€í˜œë¡œìš´ ì‚¬ë‘ì„ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤.",
                story: "ì¶˜ì¶”ì‹œëŒ€ ë…¸ë‚˜ë¼ì—ì„œ ë‹¹ì‹ ì€ ê³µìì˜ ê°€ì¥ ë›°ì–´ë‚œ ì œìì´ì ë§ˆìŒì˜ ë™ë°˜ìì˜€ìŠµë‹ˆë‹¤. í•™ë¬¸ì„ ë…¼í•˜ê³  ì¸ìƒì˜ ë„ë¦¬ë¥¼ íƒêµ¬í•˜ëŠ” ê³¼ì •ì—ì„œ ì„œë¡œì—ê²Œ ê¹Šì´ ëŒë ¸ìŠµë‹ˆë‹¤. ë¹„ë¡ ìŠ¤ìŠ¹ê³¼ ì œìë¼ëŠ” ê´€ê³„ë¡œ ì¸í•´ ê³µê°œì ìœ¼ë¡œ ë“œëŸ¬ë‚¼ ìˆ˜ ì—†ì—ˆì§€ë§Œ, ì„œë¡œë¥¼ í–¥í•œ ì¡´ê²½ê³¼ ì‚¬ë‘ì€ ì§„ë¦¬ë¥¼ ì¶”êµ¬í•˜ëŠ” ê¸¸ì—ì„œ ë”ìš± ê¹Šì–´ì¡ŒìŠµë‹ˆë‹¤.",
                compatibility: [
                    {emoji: "ğŸ“–", title: "í•™ë¬¸ì  êµê°", text: "ì§€í˜œë¥¼ ë‚˜ëˆ„ëŠ” ê¹Šì€ ì†Œí†µ"},
                    {emoji: "âš–ï¸", title: "ë„ë•ì  ì‚¬ë‘", text: "ì˜¬ë°”ë¥¸ ê¸¸ì„ í•¨ê»˜ ê±·ëŠ” ë§ˆìŒ"},
                    {emoji: "ğŸŒŸ", title: "ì •ì‹ ì  ì¼ì¹˜", text: "ì˜í˜¼ì˜ ì™„ë²½í•œ ê³µëª…"},
                    {emoji: "ğŸ‹", title: "êµ°ìì˜ ì‚¬ë‘", text: "í’ˆê²© ìˆê³  ê³ ìƒí•œ ì¸ì—°"}
                ],
                connection: 87
            },
            {
                emoji: "ğŸ•Œ",
                name: "ì‚´ë¼ë”˜",
                era: "ì‹­ìêµ° ì „ìŸ ì‹œëŒ€ (1137-1193)",
                desc: "ì´ìŠ¬ëŒì˜ ì˜ì›… ì‚´ë¼ë”˜ê³¼ ì¢…êµë¥¼ ì´ˆì›”í•œ ìˆ­ê³ í•œ ì‚¬ë‘ì„ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤.",
                story: "ì‹­ìêµ° ì „ìŸì˜ ê²©ë™ê¸° ì˜ˆë£¨ì‚´ë ˜ì—ì„œ ë‹¹ì‹ ì€ ì‚´ë¼ë”˜ì˜ ë§ˆìŒì„ ì‚¬ë¡œì¡ì€ ì—¬ì¸ì´ì—ˆìŠµë‹ˆë‹¤. ì¢…êµì™€ ë¬¸í™”ì˜ ì°¨ì´ë¥¼ ë›°ì–´ë„˜ì–´ ì„œë¡œë¥¼ ì´í•´í•˜ê³  ì‚¬ë‘í–ˆìŠµë‹ˆë‹¤. ê·¸ì˜ ê´€ìš©ê³¼ ì§€í˜œì— ê°ë™ë°›ì•˜ê³ , ë‹¹ì‹ ì˜ ìˆœìˆ˜í•¨ì´ ê·¸ì˜ ë§ˆìŒì„ í‰í™”ë¡­ê²Œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì „ìŸ ì¤‘ì—ë„ ë³€ì¹˜ ì•Šì•˜ë˜ ì‚¬ë‘ì€ í‰í™”ì˜ ìƒì§•ì´ì—ˆìŠµë‹ˆë‹¤.",
                compatibility: [
                    {emoji: "â˜®ï¸", title: "í‰í™”ë¡œìš´ ì‚¬ë‘", text: "ê°ˆë“±ì„ ì¹˜ìœ í•˜ëŠ” í¬ìš©ë ¥"},
                    {emoji: "ğŸŒ™", title: "ì´ìŠ¬ëŒ ë¬¸í™”", text: "ì‹ ë¹„ë¡­ê³  ê¹Šì´ ìˆëŠ” ì •ì‹ ì„¸ê³„"},
                    {emoji: "âš”ï¸", title: "ê¸°ì‚¬ë„ ì •ì‹ ", text: "ëª…ì˜ˆë¡­ê³  ê³ ê²°í•œ ë§ˆìŒ"},
                    {emoji: "ğŸ•Šï¸", title: "ì¢…êµ ì´ˆì›”", text: "ì‚¬ë‘ìœ¼ë¡œ í•˜ë‚˜ ëœ ì˜í˜¼"}
                ],
                connection: 86
            }
        ];

        // ìƒë…„ì›”ì¼ ì˜µì…˜ ìƒì„±
        function initDateSelectors() {
            const yearSelect = document.getElementById('yearSelect');
            const monthSelect = document.getElementById('monthSelect');
            const daySelect = document.getElementById('daySelect');
            
            // ë…„ë„ ì˜µì…˜ (1920-2010)
            for (let year = 2010; year >= 1920; year--) {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year + 'ë…„';
                yearSelect.appendChild(option);
            }
            
            // ì›” ì˜µì…˜
            for (let month = 1; month <= 12; month++) {
                const option = document.createElement('option');
                option.value = month;
                option.textContent = month + 'ì›”';
                monthSelect.appendChild(option);
            }
            
            // ì¼ ì˜µì…˜
            for (let day = 1; day <= 31; day++) {
                const option = document.createElement('option');
                option.value = day;
                option.textContent = day + 'ì¼';
                daySelect.appendChild(option);
            }
        }

        // ë¶„ì„ ë²„íŠ¼ í™œì„±í™” ì²´í¬
        function checkAnalyzeButton() {
            const hasImage = window.currentImageData;
            const hasYear = document.getElementById('yearSelect').value;
            const hasMonth = document.getElementById('monthSelect').value;
            const hasDay = document.getElementById('daySelect').value;
            
            const analyzeBtn = document.getElementById('analyzeBtn');
            analyzeBtn.disabled = !(hasImage && hasYear && hasMonth && hasDay);
        }

        // ì´ë¯¸ì§€ ì—…ë¡œë“œ ì²˜ë¦¬
        document.getElementById('imageUpload').addEventListener('change', function(e) {
            console.log('íŒŒì¼ ì„ íƒ ì´ë²¤íŠ¸ ë°œìƒ');
            const file = e.target.files[0];
            
            if (file) {
                console.log('ì„ íƒëœ íŒŒì¼:', file.name, file.type, file.size);
                
                // íŒŒì¼ íƒ€ì… ê²€ì¦
                if (!file.type.startsWith('image/')) {
                    alert('ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
                    return;
                }
                
                // íŒŒì¼ í¬ê¸° ê²€ì¦ (10MB ì œí•œ)
                if (file.size > 10 * 1024 * 1024) {
                    alert('íŒŒì¼ í¬ê¸°ëŠ” 10MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.');
                    return;
                }
                
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    console.log('íŒŒì¼ ì½ê¸° ì™„ë£Œ');
                    const previewImage = document.getElementById('previewImage');
                    const previewContainer = document.getElementById('previewContainer');
                    
                    previewImage.src = e.target.result;
                    previewContainer.style.display = 'block';
                    
                    // ì´ë¯¸ì§€ë¥¼ ì „ì—­ ë³€ìˆ˜ì— ì €ì¥ (ì¼ê´€ëœ ê²°ê³¼ë¥¼ ìœ„í•´)
                    window.currentImageData = e.target.result;
                    
                    // ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ í›„ ìŠ¤í¬ë¡¤
                    previewImage.onload = function() {
                        checkAnalyzeButton();
                        previewContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    };
                };
                
                reader.onerror = function() {
                    console.error('íŒŒì¼ ì½ê¸° ì‹¤íŒ¨');
                    alert('íŒŒì¼ì„ ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                };
                
                reader.readAsDataURL(file);
            } else {
                console.log('ì„ íƒëœ íŒŒì¼ì´ ì—†ìŒ');
            }
        });

        // ë‚ ì§œ ì„ íƒ ì´ë²¤íŠ¸
        document.getElementById('yearSelect').addEventListener('change', checkAnalyzeButton);
        document.getElementById('monthSelect').addEventListener('change', checkAnalyzeButton);
        document.getElementById('daySelect').addEventListener('change', checkAnalyzeButton);

        // ì‚¬ìš© ì œí•œ ê´€ë¦¬
        let testCount = 0;
        let lastTestTime = 0;
        const TEST_COOLDOWN = 3000; // 3ì´ˆ ì¿¨ë‹¤ìš´
        const DAILY_LIMIT = 10; // í•˜ë£¨ 10íšŒ ì œí•œ

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì˜¤ëŠ˜ì˜ í…ŒìŠ¤íŠ¸ íšŸìˆ˜ í™•ì¸
        function getTodayTestCount() {
            const today = new Date().toDateString();
            const stored = localStorage.getItem('pastLoverTestData');
            
            if (stored) {
                const data = JSON.parse(stored);
                if (data.date === today) {
                    return data.count;
                }
            }
            return 0;
        }

        // ì˜¤ëŠ˜ì˜ í…ŒìŠ¤íŠ¸ íšŸìˆ˜ ì €ì¥
        function saveTodayTestCount(count) {
            const today = new Date().toDateString();
            const data = { date: today, count: count };
            localStorage.setItem('pastLoverTestData', JSON.stringify(data));
        }

        // í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸
        function canTest() {
            const now = Date.now();
            const todayCount = getTodayTestCount();
            
            // ì¿¨ë‹¤ìš´ ì²´í¬ (ì—°ì† í´ë¦­ ë°©ì§€)
            if (now - lastTestTime < TEST_COOLDOWN) {
                const remaining = Math.ceil((TEST_COOLDOWN - (now - lastTestTime)) / 1000);
                alert(`â° ${remaining}ì´ˆ í›„ì— ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”!`);
                return false;
            }
            
            // ì¼ì¼ ì œí•œ ì²´í¬ (ë¶€ë“œëŸ¬ìš´ ì œí•œ)
            if (todayCount >= DAILY_LIMIT) {
                showLimitMessage(todayCount);
                return false;
            }
            
            return true;
        }

        // ì œí•œ ë©”ì‹œì§€ í‘œì‹œ (ê°•ì œ ì°¨ë‹¨ë³´ë‹¤ëŠ” ì•ˆë‚´)
        function showLimitMessage(count) {
            const messages = [
                `ğŸ¯ ì˜¤ëŠ˜ ${count}ë²ˆì§¸ ë¶„ì„ì´ë„¤ìš”! ì •ë§ ì—´ì‹¬ì´ì‹œêµ°ìš”!`,
                `ğŸ”¥ ì´ë¯¸ ì¶©ë¶„íˆ ì¦ê¸°ì…¨ì–´ìš”! ì¹œêµ¬ë“¤ê³¼ ê³µìœ í•´ë³´ëŠ” ê±´ ì–´ë–¨ê¹Œìš”?`,
                `â­ ë‚´ì¼ ë‹¤ì‹œ ì˜¤ì‹œë©´ ìƒˆë¡œìš´ ì¸ì—°ì´ ê¸°ë‹¤ë ¤ìš”!`,
                `ğŸ’ ê²°ê³¼ê°€ ë§ˆìŒì— ë“œì…¨ë‚˜ìš”? SNSì— ê³µìœ í•´ë³´ì„¸ìš”!`
            ];
            
            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            
            // ë¶€ë“œëŸ¬ìš´ ì•ˆë‚´ (ê°•ì œ ì°¨ë‹¨ X)
            if (confirm(`${randomMessage}\n\nê·¸ë˜ë„ ê³„ì† ë¶„ì„í•˜ì‹œê² ì–´ìš”?`)) {
                return true; // ì‚¬ìš©ìê°€ ì›í•˜ë©´ ê³„ì† í—ˆìš©
            }
            
            return false;
        }

        // ì´ë¯¸ì§€ì™€ ìƒë…„ì›”ì¼ ê¸°ë°˜ ì „ìƒ ì—°ì¸ ê²°ì • í•¨ìˆ˜
        function getPastLoverFromData(imageData, birthYear, birthMonth, birthDay) {
            if (!imageData) {
                // ì´ë¯¸ì§€ê°€ ì—†ìœ¼ë©´ ìƒë…„ì›”ì¼ë§Œìœ¼ë¡œ
                const dateHash = simpleHash(`${birthYear}-${birthMonth}-${birthDay}`);
                return pastLifeLoverData[dateHash % pastLifeLoverData.length];
            }
            
            // ì´ë¯¸ì§€ì™€ ìƒë…„ì›”ì¼ ì¡°í•©ìœ¼ë¡œ í•´ì‹œ ìƒì„±
            const combinedData = imageData + `${birthYear}-${birthMonth}-${birthDay}`;
            const hash = simpleHash(combinedData);
            
            // í•´ì‹œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì „ìƒ ì—°ì¸ ê²°ì • (í•­ìƒ ë™ì¼í•œ ê²°ê³¼)
            const loverIndex = hash % pastLifeLoverData.length;
            
            console.log('ì¡°í•© í•´ì‹œ:', hash, 'ì „ìƒ ì—°ì¸ ì¸ë±ìŠ¤:', loverIndex);
            
            return pastLifeLoverData[loverIndex];
        }

        // ì—…ë¡œë“œ ì´ˆê¸°í™” í•¨ìˆ˜
        function resetUpload() {
            const fileInput = document.getElementById('imageUpload');
            const previewContainer = document.getElementById('previewContainer');
            
            fileInput.value = '';
            previewContainer.style.display = 'none';
            
            // ì €ì¥ëœ ì´ë¯¸ì§€ ë°ì´í„°ë„ ì´ˆê¸°í™”
            window.currentImageData = null;
            
            // ìƒë…„ì›”ì¼ ì´ˆê¸°í™”
            document.getElementById('yearSelect').value = '';
            document.getElementById('monthSelect').value = '';
            document.getElementById('daySelect').value = '';
            
            checkAnalyzeButton();
            
            console.log('ì—…ë¡œë“œ ì´ˆê¸°í™” ì™„ë£Œ');
        }

        // ë“œë˜ê·¸ ì•¤ ë“œë¡­ ê¸°ëŠ¥
        const uploadSection = document.getElementById('uploadSection');
        
        uploadSection.addEventListener('dragover', function(e) {
            e.preventDefault();
            e.stopPropagation();
            uploadSection.classList.add('dragover');
        });
        
        uploadSection.addEventListener('dragleave', function(e) {
            e.preventDefault();
            e.stopPropagation();
            uploadSection.classList.remove('dragover');
        });
        
        uploadSection.addEventListener('drop', function(e) {
            e.preventDefault();
            e.stopPropagation();
            uploadSection.classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            console.log('ë“œë¡­ëœ íŒŒì¼ ìˆ˜:', files.length);
            
            if (files.length > 0) {
                const file = files[0];
                
                // íŒŒì¼ íƒ€ì… ê²€ì¦
                if (!file.type.startsWith('image/')) {
                    alert('ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
                    return;
                }
                
                const fileInput = document.getElementById('imageUpload');
                
                // FileList ê°ì²´ ìƒì„±
                const dt = new DataTransfer();
                dt.items.add(file);
                fileInput.files = dt.files;
                
                // ìˆ˜ë™ìœ¼ë¡œ change ì´ë²¤íŠ¸ ë°œìƒ
                const event = new Event('change', { bubbles: true });
                fileInput.dispatchEvent(event);
            }
        });

        // ëª¨ë°”ì¼ í„°ì¹˜ ì´ë²¤íŠ¸ ì²˜ë¦¬
        uploadSection.addEventListener('touchstart', function(e) {
            const fileInput = document.getElementById('imageUpload');
            fileInput.click();
        });

        // ê°„ë‹¨í•œ í•´ì‹œ í•¨ìˆ˜ (ì´ë¯¸ì§€ ë°ì´í„° ê¸°ë°˜)
        function simpleHash(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // 32ë¹„íŠ¸ ì •ìˆ˜ë¡œ ë³€í™˜
            }
            return Math.abs(hash);
        }

        // ì „ìƒ ì—°ì¸ ë¶„ì„ (ì œí•œ ì²´í¬ í¬í•¨)
        function analyzeImage() {
            // í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸
            if (!canTest()) {
                return;
            }
            
            // í•„ìˆ˜ ì •ë³´ í™•ì¸
            if (!window.currentImageData) {
                alert('ì‚¬ì§„ì„ ë¨¼ì € ì—…ë¡œë“œí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const birthYear = document.getElementById('yearSelect').value;
            const birthMonth = document.getElementById('monthSelect').value;
            const birthDay = document.getElementById('daySelect').value;
            
            if (!birthYear || !birthMonth || !birthDay) {
                alert('ìƒë…„ì›”ì¼ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            document.getElementById('loading').style.display = 'block';
            document.querySelector('.upload-section').style.display = 'none';
            document.querySelector('.input-section').style.display = 'none';
            
            // í…ŒìŠ¤íŠ¸ íšŸìˆ˜ ë° ì‹œê°„ ê¸°ë¡
            const todayCount = getTodayTestCount() + 1;
            saveTodayTestCount(todayCount);
            lastTestTime = Date.now();
            
            setTimeout(() => {
                // ì´ë¯¸ì§€ì™€ ìƒë…„ì›”ì¼ ê¸°ë°˜ìœ¼ë¡œ ì¼ê´€ëœ ê²°ê³¼ ìƒì„±
                const selectedLover = getPastLoverFromData(
                    window.currentImageData, 
                    birthYear, 
                    birthMonth, 
                    birthDay
                );
                
                document.getElementById('loverEmoji').textContent = selectedLover.emoji;
                document.getElementById('loverName').textContent = selectedLover.name;
                document.getElementById('loverEra').textContent = selectedLover.era;
                document.getElementById('loverDescription').textContent = selectedLover.desc;
                document.getElementById('loveStoryText').textContent = selectedLover.story;
                document.getElementById('connectionScore').textContent = `ğŸ’• ì˜í˜¼ ì—°ê²°ë„: ${selectedLover.connection}%`;
                
                // ì „ìƒ ì¸ì—° íŠ¹ì§• í‘œì‹œ
                const compatibilityGrid = document.getElementById('compatibilityGrid');
                compatibilityGrid.innerHTML = '';
                selectedLover.compatibility.forEach(trait => {
                    const item = document.createElement('div');
                    item.className = 'compatibility-item';
                    item.innerHTML = `
                        <div class="compatibility-emoji">${trait.emoji}</div>
                        <div class="compatibility-title">${trait.title}</div>
                        <div class="compatibility-text">${trait.text}</div>
                    `;
                    compatibilityGrid.appendChild(item);
                });
                
                // ê²°ê³¼ë¥¼ ì „ì—­ ë³€ìˆ˜ì— ì €ì¥ (ê³µìœ  ê¸°ëŠ¥ì„ ìœ„í•´)
                window.currentLoverResult = selectedLover;
                window.currentBirthInfo = { year: birthYear, month: birthMonth, day: birthDay };
                
                document.getElementById('loading').style.display = 'none';
                document.getElementById('resultSection').style.display = 'block';
                
                // í…ŒìŠ¤íŠ¸ íšŸìˆ˜ í‘œì‹œ (5íšŒ ì´ìƒë¶€í„°)
                if (todayCount >= 5) {
                    const countMessage = document.createElement('div');
                    countMessage.style.cssText = `
                        background: linear-gradient(45deg, #FFE0E6, #FFF0F5);
                        padding: 0.5rem 1rem;
                        border-radius: 15px;
                        margin: 1rem 0;
                        font-size: 0.9rem;
                        color: #FF1493;
                        border: 1px solid rgba(255,182,193,0.3);
                    `;
                    countMessage.innerHTML = `ğŸ’• ì˜¤ëŠ˜ ${todayCount}ë²ˆì§¸ ë¶„ì„! ì •ë§ ì—´ì‹¬ì´ë„¤ìš”! âœ¨`;
                    
                    const resultSection = document.getElementById('resultSection');
                    resultSection.insertBefore(countMessage, resultSection.children[1]);
                }
                
                document.getElementById('resultSection').scrollIntoView({behavior: 'smooth'});
            }, 4000);
        }

        // ê³µìœ ìš© ì´ë¯¸ì§€ ìƒì„±
        function generateShareImage() {
            if (!window.currentLoverResult) {
                alert('ë¨¼ì € ì „ìƒ ì—°ì¸ ë¶„ì„ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”!');
                return null;
            }

            const canvas = document.getElementById('shareCanvas');
            const ctx = canvas.getContext('2d');
            
            // ë°°ê²½ ê·¸ë¼ë””ì–¸íŠ¸
            const gradient = ctx.createLinearGradient(0, 0, 0, 800);
            gradient.addColorStop(0, '#FF69B4');
            gradient.addColorStop(0.5, '#FFB6C1');
            gradient.addColorStop(1, '#FFC0CB');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 600, 800);
            
            // ë°˜íˆ¬ëª… í°ìƒ‰ ë°°ê²½
            ctx.fillStyle = 'rgba(255, 255, 255, 0.95)';
            roundRect(ctx, 50, 100, 500, 600, 20);
            ctx.fill();
            
            // ì œëª©
            ctx.fillStyle = '#333';
            ctx.font = 'bold 32px Arial, sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('ğŸ”® ì „ìƒ ì—°ì¸ ì°¾ê¸°', 300, 160);
            
            // ì „ìƒ ì—°ì¸ ì´ëª¨ì§€
            ctx.font = '120px Arial, sans-serif';
            ctx.fillText(window.currentLoverResult.emoji, 300, 280);
            
            // ì „ìƒ ì—°ì¸ ì´ë¦„
            ctx.fillStyle = '#FF1493';
            ctx.font = 'bold 36px Arial, sans-serif';
            ctx.fillText(window.currentLoverResult.name, 300, 350);
            
            // ì‹œëŒ€
            ctx.fillStyle = '#FF69B4';
            ctx.font = '24px Arial, sans-serif';
            ctx.fillText(window.currentLoverResult.era, 300, 390);
            
            // ì„¤ëª…
            ctx.fillStyle = '#555';
            ctx.font = '18px Arial, sans-serif';
            ctx.textAlign = 'center';
            const lines = wrapText(ctx, window.currentLoverResult.desc, 300, 430, 400, 25);
            
            // ì˜í˜¼ ì—°ê²°ë„
            if (window.currentLoverResult.connection) {
                ctx.fillStyle = '#FF1493';
                ctx.font = 'bold 28px Arial, sans-serif';
                ctx.fillText(`ğŸ’• ì˜í˜¼ ì—°ê²°ë„: ${window.currentLoverResult.connection}%`, 300, 520);
            }
            
            // í•˜ë‹¨ URL
            ctx.fillStyle = '#999';
            ctx.font = '18px Arial, sans-serif';
            ctx.fillText('ğŸŒŸ ì „ìƒ ì—°ì¸ ì°¾ê¸°ì—ì„œ ë” ë§ì€ ë¶„ì„ì„!', 300, 650);
            
            return canvas.toDataURL('image/png');
        }

        // í…ìŠ¤íŠ¸ ì¤„ë°”ê¿ˆ í•¨ìˆ˜
        function wrapText(context, text, x, y, maxWidth, lineHeight) {
            const words = text.split(' ');
            let line = '';
            let lines = [];
            
            for (let n = 0; n < words.length; n++) {
                const testLine = line + words[n] + ' ';
                const metrics = context.measureText(testLine);
                const testWidth = metrics.width;
                
                if (testWidth > maxWidth && n > 0) {
                    lines.push(line);
                    line = words[n] + ' ';
                } else {
                    line = testLine;
                }
            }
            lines.push(line);
            
            // ì‹¤ì œ í…ìŠ¤íŠ¸ ê·¸ë¦¬ê¸°
            for (let i = 0; i < lines.length; i++) {
                context.fillText(lines[i], x, y + (i * lineHeight));
            }
            
            return lines;
        }

        // Canvas RoundRect Polyfill
        function roundRect(ctx, x, y, w, h, r) {
            if (w < 2 * r) r = w / 2;
            if (h < 2 * r) r = h / 2;
            ctx.beginPath();
            ctx.moveTo(x + r, y);
            ctx.arcTo(x + w, y, x + w, y + h, r);
            ctx.arcTo(x + w, y + h, x, y + h, r);
            ctx.arcTo(x, y + h, x, y, r);
            ctx.arcTo(x, y, x + w, y, r);
            ctx.closePath();
            return ctx;
        }

        // ì¹´ì¹´ì˜¤í†¡ ê³µìœ 
        function shareToKakao() {
            console.log('ì¹´ì¹´ì˜¤í†¡ ê³µìœ  ì‹œì‘');
            
            if (!window.currentLoverResult) {
                alert('ë¨¼ì € ì „ìƒ ì—°ì¸ ë¶„ì„ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”!');
                return;
            }

            const shareText = `ğŸ”® ì „ìƒ ì—°ì¸ ì°¾ê¸° ê²°ê³¼!\n\n${window.currentLoverResult.emoji} ${window.currentLoverResult.name}\n${window.currentLoverResult.era}\n\nğŸ’• ì˜í˜¼ ì—°ê²°ë„: ${window.currentLoverResult.connection}%\n\në‚˜ë„ ë¶„ì„í•´ë³´ê¸°: ${window.location.href}`;
            
            // ì¹´ì¹´ì˜¤ SDK í™•ì¸
            if (typeof Kakao !== 'undefined' && Kakao.isInitialized && Kakao.isInitialized()) {
                try {
                    Kakao.Share.sendDefault({
                        objectType: 'feed',
                        content: {
                            title: 'ğŸ”® ì „ìƒ ì—°ì¸ ì°¾ê¸° ê²°ê³¼!',
                            description: `${window.currentLoverResult.emoji} ${window.currentLoverResult.name} (${window.currentLoverResult.era})\nğŸ’• ì˜í˜¼ ì—°ê²°ë„: ${window.currentLoverResult.connection}%`,
                            imageUrl: 'https://your-domain.com/pastlover-og.jpg',
                            link: {
                                mobileWebUrl: window.location.href,
                                webUrl: window.location.href,
                            },
                        },
                        buttons: [
                            {
                                title: 'ë‚˜ë„ ë¶„ì„í•˜ê¸°',
                                link: {
                                    mobileWebUrl: window.location.href,
                                    webUrl: window.location.href,
                                },
                            },
                        ],
                    });
                } catch (error) {
                    console.error('ì¹´ì¹´ì˜¤ SDK ì—ëŸ¬:', error);
                    fallbackKakaoShare(shareText);
                }
            } else {
                fallbackKakaoShare(shareText);
            }
        }

        // ì¹´ì¹´ì˜¤í†¡ í´ë°± ê³µìœ 
        function fallbackKakaoShare(shareText) {
            // ëª¨ë°”ì¼ì—ì„œ ì¹´ì¹´ì˜¤í†¡ ì•±ìœ¼ë¡œ ì§ì ‘ ê³µìœ  ì‹œë„
            if (/Mobi|Android/i.test(navigator.userAgent)) {
                try {
                    const kakaoUrl = `kakaotalk://share/text?text=${encodeURIComponent(shareText)}`;
                    window.location.href = kakaoUrl;
                    
                    setTimeout(() => {
                        if (navigator.share) {
                            navigator.share({
                                title: 'ğŸ”® ì „ìƒ ì—°ì¸ ì°¾ê¸°',
                                text: shareText,
                                url: window.location.href
                            }).catch(error => {
                                copyToClipboard(shareText);
                            });
                        } else {
                            copyToClipboard(shareText);
                        }
                    }, 3000);
                } catch (error) {
                    copyToClipboard(shareText);
                }
            } else {
                copyToClipboard(shareText);
            }
        }

        // ì¸ìŠ¤íƒ€ê·¸ë¨ ê³µìœ 
        function shareToInstagram() {
            if (!window.currentLoverResult) {
                alert('ë¨¼ì € ì „ìƒ ì—°ì¸ ë¶„ì„ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const shareImageData = generateShareImage();
            if (!shareImageData) return;
            
            const link = document.createElement('a');
            link.download = `ì „ìƒì—°ì¸í…ŒìŠ¤íŠ¸_${window.currentLoverResult.name.replace(' ', '_')}.png`;
            link.href = shareImageData;
            
            if (/Mobi|Android/i.test(navigator.userAgent)) {
                link.click();
                setTimeout(() => {
                    const instagramUrl = 'instagram://camera';
                    window.location.href = instagramUrl;
                    
                    setTimeout(() => {
                        window.open('https://www.instagram.com/', '_blank');
                    }, 2000);
                }, 3000);
            } else {
                link.click();
                window.open('https://www.instagram.com/', '_blank');
                alert('ì´ë¯¸ì§€ê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!\nì¸ìŠ¤íƒ€ê·¸ë¨ì—ì„œ ì—…ë¡œë“œí•´ë³´ì„¸ìš” ğŸ“·');
            }
        }

        // í˜ì´ìŠ¤ë¶ ê³µìœ 
        function shareToFacebook() {
            if (!window.currentLoverResult) {
                alert('ë¨¼ì € ì „ìƒ ì—°ì¸ ë¶„ì„ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”!');
                return;
            }

            const shareUrl = encodeURIComponent(window.location.href);
            const shareText = encodeURIComponent(`ğŸ”® ì „ìƒ ì—°ì¸ ì°¾ê¸°ì—ì„œ ${window.currentLoverResult.emoji} ${window.currentLoverResult.name}ì´ ë‚˜ì™”ì–´ìš”! ì˜í˜¼ ì—°ê²°ë„ ${window.currentLoverResult.connection}%`);
            
            const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${shareUrl}&quote=${shareText}`;
            window.open(facebookUrl, '_blank', 'width=600,height=400');
        }

        // íŠ¸ìœ„í„° ê³µìœ 
        function shareToTwitter() {
            if (!window.currentLoverResult) {
                alert('ë¨¼ì € ì „ìƒ ì—°ì¸ ë¶„ì„ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”!');
                return;
            }

            const shareText = encodeURIComponent(`ğŸ”® ì „ìƒ ì—°ì¸ ì°¾ê¸° ê²°ê³¼: ${window.currentLoverResult.emoji} ${window.currentLoverResult.name}! ì˜í˜¼ ì—°ê²°ë„ ${window.currentLoverResult.connection}% âœ¨`);
            const shareUrl = encodeURIComponent(window.location.href);
            const hashtags = encodeURIComponent('ì „ìƒì—°ì¸,ìš´ëª…ì˜ì¸ì—°,ì†Œìš¸ë©”ì´íŠ¸,AIë¶„ì„');
            
            const twitterUrl = `https://twitter.com/intent/tweet?text=${shareText}&url=${shareUrl}&hashtags=${hashtags}`;
            window.open(twitterUrl, '_blank', 'width=600,height=400');
        }

        // ì¼ë°˜ ê³µìœ  (ë§í¬ ë³µì‚¬)
        function shareGeneral() {
            if (!window.currentLoverResult) {
                alert('ë¨¼ì € ì „ìƒ ì—°ì¸ ë¶„ì„ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”!');
                return;
            }

            const shareText = `ğŸ”® ì „ìƒ ì—°ì¸ ì°¾ê¸° ê²°ê³¼!\n\n${window.currentLoverResult.emoji} ${window.currentLoverResult.name}\n${window.currentLoverResult.era}\n\n${window.currentLoverResult.desc}\n\nğŸ’• ì˜í˜¼ ì—°ê²°ë„: ${window.currentLoverResult.connection}%\n\në‚˜ë„ ë¶„ì„í•´ë³´ê¸°: ${window.location.href}`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'ğŸ”® ì „ìƒ ì—°ì¸ ì°¾ê¸°',
                    text: shareText,
                    url: window.location.href
                }).catch(error => {
                    copyToClipboard(shareText);
                });
            } else {
                copyToClipboard(shareText);
            }
        }

        // í´ë¦½ë³´ë“œì— ë³µì‚¬
        function copyToClipboard(text) {
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(() => {
                    alert('ğŸ’• ì „ìƒ ì—°ì¸ ë¶„ì„ ê²°ê³¼ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!\n\nì›í•˜ëŠ” ê³³ì— ë¶™ì—¬ë„£ê¸°í•´ì„œ ê³µìœ í•´ë³´ì„¸ìš”! âœ¨');
                }).catch(error => {
                    fallbackCopyToClipboard(text);
                });
            } else {
                fallbackCopyToClipboard(text);
            }
        }

        // í´ë¦½ë³´ë“œ ë³µì‚¬ í´ë°±
        function fallbackCopyToClipboard(text) {
            try {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                textArea.style.position = 'fixed';
                textArea.style.left = '-999999px';
                textArea.style.top = '-999999px';
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                
                const successful = document.execCommand('copy');
                document.body.removeChild(textArea);
                
                if (successful) {
                    alert('ğŸ’• ì „ìƒ ì—°ì¸ ë¶„ì„ ê²°ê³¼ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!\n\nì›í•˜ëŠ” ê³³ì— ë¶™ì—¬ë„£ê¸°í•´ì„œ ê³µìœ í•´ë³´ì„¸ìš”! âœ¨');
                } else {
                    alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ì„ íƒí•´ì„œ ë³µì‚¬í•´ì£¼ì„¸ìš”.');
                }
            } catch (error) {
                alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ì„ íƒí•´ì„œ ë³µì‚¬í•´ì£¼ì„¸ìš”.');
            }
        }

        function retakeTest() {
            document.getElementById('resultSection').style.display = 'none';
            document.querySelector('.upload-section').style.display = 'block';
            document.querySelector('.input-section').style.display = 'block';
            resetUpload();
            
            // ì €ì¥ëœ ë°ì´í„° ì´ˆê¸°í™”
            window.currentImageData = null;
            window.currentLoverResult = null;
            window.currentBirthInfo = null;
        }

        function saveResult() {
            if (!window.currentLoverResult) {
                alert('ì €ì¥í•  ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤!');
                return;
            }
            
            const resultData = {
                lover: window.currentLoverResult,
                birthInfo: window.currentBirthInfo,
                timestamp: new Date().toISOString(),
                url: window.location.href
            };
            
            try {
                localStorage.setItem('pastLoverTestResult', JSON.stringify(resultData));
                alert('ê²°ê³¼ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ’¾\n\nì–¸ì œë“  ë‹¤ì‹œ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.');
            } catch (e) {
                alert('ê²°ê³¼ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìŠ¤í¬ë¦°ìƒ·ìœ¼ë¡œ ì €ì¥í•´ë³´ì„¸ìš”! ğŸ“·');
            }
        }

        function scrollToUpload() {
            document.querySelector('.upload-section').scrollIntoView({behavior: 'smooth'});
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            initDateSelectors();
        });
    </script>
</body>
</html>
